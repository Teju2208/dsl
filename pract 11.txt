/*Department maintains a student information. The file contains roll number, name,
division and address. Allow user to add, delete information of student. Display
information of particular employee. If record of student does not exist an appropriate
message is displayed. If it is, then the system displays the student details. Use
sequential file to main the data. */
#include iostream
#include fstream
#include cstring

using namespace std;

struct Student {
    int rollNumber;
    char name[50];
    char division[10];
    char address[100];
};

 Function to add student information
void addStudent() {
    ofstream file(students.dat, iosbinary  iosapp);

    Student student;
    cout  Enter roll number ;
    cin  student.rollNumber;
    cout  Enter name ;
    cin.ignore();
    cin.getline(student.name, 50);
    cout  Enter division ;
    cin  student.division;
    cout  Enter address ;
    cin.ignore();
    cin.getline(student.address, 100);

    file.write(reinterpret_castchar(&student), sizeof(Student));
    file.close();

    cout  Student information added successfully!  endl;
}

 Function to delete student information
void deleteStudent() {
    ifstream file(students.dat, iosbinary);
    ofstream tempFile(temp.dat, iosbinary);

    int rollNumber;
    cout  Enter roll number to delete ;
    cin  rollNumber;

    Student student;
    bool found = false;

    while (file.read(reinterpret_castchar(&student), sizeof(Student))) {
        if (student.rollNumber != rollNumber) {
            tempFile.write(reinterpret_castchar(&student), sizeof(Student));
        } else {
            found = true;
        }
    }

    file.close();
    tempFile.close();

    remove(students.dat);
    rename(temp.dat, students.dat);

    if (found) {
        cout  Student information deleted successfully!  endl;
    } else {
        cout  Student not found!  endl;
    }
}

 Function to display student information
void displayStudent() {
    ifstream file(students.dat, iosbinary);

    int rollNumber;
    cout  Enter roll number to display ;
    cin  rollNumber;

    Student student;
    bool found = false;

    while (file.read(reinterpret_castchar(&student), sizeof(Student))) {
        if (student.rollNumber == rollNumber) {
            cout  Roll Number   student.rollNumber  endl;
            cout  Name   student.name  endl;
            cout  Division   student.division  endl;
            cout  Address   student.address  endl;
            found = true;
            break;
        }
    }

    file.close();

    if (!found) {
        cout  Student not found!  endl;
    }
}

int main() {
    int choice;

    do {
        cout  1. Add studentn;
        cout  2. Delete studentn;
        cout  3. Display studentn;
        cout  4. Exitn;
        cout  Enter your choice ;
        cin  choice;

        switch (choice) {
            case 1
                addStudent();
                break;
            case 2
                deleteStudent();
                break;
            case 3
                displayStudent();
                break;
            case 4
                cout  Exiting program. Goodbye!  endl;
                break;
            default
                cout  Invalid choice. Please try again.  endl;
        }

        cout  endl;
    } while (choice != 4);

    return 0;
}

